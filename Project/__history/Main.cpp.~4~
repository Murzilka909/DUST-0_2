//---------------------------------------------------------------------------
#include <vcl.h>
#include <iostream>
#include <string>
#include <sstream>
#include <cstdio>
#include <stdlib.h>
#include <iomanip>

#include <vcl.h>
#pragma hdrstop

#include "Main.h"
//---------------------------------------------------------------------------
#pragma package(smart_init)
#pragma resource "*.dfm"
TForm1 *Form1;
//----------------------глобальные переменные--------------------------------
FILE* file_Data;          //осциллограмма - чтение
FILE* file_Res;           //спектр - запись

std::string fName; //имя и путь к файлу

int strNum, colNum; //кол-во строк и столбцов в файле данных
int fileSize;      //размер файла в байтах

double** dataArr;  //массив для файла данных

int i,j,k;//счётчики
char c;//буфер
std::string s;//буфер

//---------------------преобразования типов всякие---------------------------
std::string UnicodeToString (UnicodeString us)
{
	AnsiString as=us;
	std::string s = as.c_str();
	return s;
}
std::string IntToString (int a)
{
	std::stringstream ss;
	ss << a;
	std::string s = ss.str();
	return s;
}
std::string DoubleToString(double a)
{
	std::stringstream ss;
	ss.setf(std::ios::scientific, std::ios::floatfield);
	ss << std::setprecision(5) << a;
	std::string s = ss.str();
	return s;
}
//--------------------получение размера файла,выделение памяти---------------
void GetFileSize()
{
	fseek( file_Data , 0 , SEEK_END );//в конец файла маркер
	fileSize = ftell(file_Data);//размер файла в байтах
	fseek( file_Data , 0 , SEEK_SET );//обратно
	i=0;
	strNum=0;
	colNum=0;
	while (i<fileSize)//подсчёт размеров файла
	{
		fread(&c,1,1,file_Data);
		if (c=='\n')
		{strNum++;}
		if ((c=='\t')&(i==1))
		{colNum++;}
		i++;
	}
	strNum=strNum-2;
	colNum++;
    dataArr = new

}

//----------------------открытие окна----------------------------------------
__fastcall TForm1::TForm1(TComponent* Owner)
	: TForm(Owner)
{
}
//---------------------закрытие окна-----------------------------------------
void __fastcall TForm1::Exit_ButtonClick(TObject *Sender)
{
	Close();
}
//---------------------чтение файла в ручном режиме--------------------------
void __fastcall TForm1::HandFNameButtonClick(TObject *Sender)
{
	if ( HandTextFileDialog->Execute() )
	//диалог сработал
	{
		FNameLabel->Caption=HandTextFileDialog->FileName;
		fName=UnicodeToString(FNameLabel->Caption);
		file_Data = fopen(fName.c_str(), "r");
		if (file_Data != NULL)
		{

			//fclose (ptrFile);
		}
	}
	else //диалог не сработал
	{
		ShowMessage("File is not selected");
		FNameLabel->Caption="The file is not selected";
	}
}
//---------------------------------------------------------------------------

